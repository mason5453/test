<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PNG图片轮播展示</title>
    <style>
        /* 全局样式重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f0f0f0;
            padding: 20px 0;
        }

        /* 轮播容器：核心布局，内边距防止控件贴边，所有元素绝对定位不重叠图片 */
        .slider-container {
            width: 90%;
            max-width: 1200px;
            height: 700px; /* 加大容器高度，预留描述区空间 */
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            background-color: #ffffff;
            padding: 15px; /* 内边距，彻底避免控件和图片重叠 */
        }

        /* 图片容器：占满轮播容器的可用空间，无任何控件重叠 */
        .slider-images-wrapper {
            width: 100%;
            height: 100%;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
        }

        /* 图片列表：横向排列，滑动核心 */
        .slider-images {
            display: flex;
            width: 100%;
            height: 100%;
            transition: transform 0.5s ease-in-out;
        }

        /* 轮播图片：自适应容器，完整显示无拉伸 */
        .slider-image {
            width: 100%;
            height: 100%;
            flex-shrink: 0;
        }
        .slider-image img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* 保持图片比例，完整显示 */
            background-color: #f8f8f8;
        }

        /* 翻页箭头按钮：左右侧中间，不重叠图片/描述区 */
        .slider-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 56px;
            height: 56px;
            background-color: rgba(0,0,0,0.6);
            color: #ffffff;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            z-index: 20;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .slider-nav-btn:hover {
            background-color: #000000;
            transform: translateY(-50%) scale(1.05);
        }
        .prev-btn {
            left: 25px; /* 远离边缘，不重叠 */
        }
        .next-btn {
            right: 25px; /* 远离边缘，不重叠 */
        }

        /* 播放/暂停按钮：左上角，独立区域，无重叠 */
        .play-pause-btn {
            position: absolute;
            top: 25px;
            left: 25px;
            width: 90px;
            height: 40px;
            background-color: rgba(255, 87, 34, 0.9);
            color: #ffffff;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            z-index: 20;
            transition: all 0.3s ease;
        }
        .play-pause-btn:hover {
            background-color: #ff5722;
            transform: scale(1.05);
        }
        .play-pause-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
        }

        /* 【核心】超大可滚动描述区：底部整栏，支持500+字，自动滚动 */
        .slider-desc-container {
            position: absolute;
            bottom: 25px;
            left: 25px;
            right: 120px; /* 预留指示器位置，不重叠 */
            height: 120px; /* 固定高度，超出滚动 */
            background-color: rgba(0,0,0,0.85);
            color: #ffffff;
            border-radius: 8px;
            padding: 15px 20px;
            z-index: 20;
            overflow-y: auto; /* 内容超出自动垂直滚动 */
            scrollbar-width: thin; /* 美化火狐滚动条 */
            scrollbar-color: #ff5722 #333333;
        }
        /* 美化Chrome/Edge滚动条 */
        .slider-desc-container::-webkit-scrollbar {
            width: 6px;
        }
        .slider-desc-container::-webkit-scrollbar-track {
            background: #333333;
            border-radius: 3px;
        }
        .slider-desc-container::-webkit-scrollbar-thumb {
            background: #ff5722;
            border-radius: 3px;
        }
        .slider-desc-container::-webkit-scrollbar-thumb:hover {
            background: #e64a19;
        }
        /* 描述文字样式：放大字体，行高舒适，支持大段文字 */
        #imageDesc {
            font-size: 18px; /* 放大字体，清晰可见 */
            line-height: 1.6; /* 行高舒适，易读 */
            word-wrap: break-word; /* 长单词自动换行 */
            white-space: pre-line; /* 保留换行，支持多段文字 */
        }

        /* 指示器（小圆点）：右下角，独立区域，不重叠描述区 */
        .slider-indicators {
            position: absolute;
            bottom: 25px;
            right: 25px;
            display: flex;
            gap: 12px;
            z-index: 20;
            background-color: rgba(0,0,0,0.7);
            padding: 8px 15px;
            border-radius: 20px;
        }
        .indicator {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background-color: #cccccc;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .indicator.active {
            background-color: #ff5722;
            transform: scale(1.2); /* 激活的圆点放大，高亮 */
        }
        .indicator:hover {
            background-color: #ffffff;
        }
    </style>
</head>
<body>
    <!-- 轮播容器 -->
    <div class="slider-container">
        <!-- 图片容器：纯图片区域，无任何控件重叠 -->
        <div class="slider-images-wrapper">
            <div class="slider-images"></div>
        </div>

        <!-- 翻页箭头 -->
        <button class="slider-nav-btn prev-btn">&lt;</button>
        <button class="slider-nav-btn next-btn">&gt;</button>

        <!-- 播放/暂停按钮 -->
        <button class="play-pause-btn" id="playPauseBtn">播放</button>

        <!-- 超大可滚动描述区 -->
        <div class="slider-desc-container">
            <p id="imageDesc"></p>
        </div>

        <!-- 指示器（小圆点） -->
        <div class="slider-indicators"></div>
    </div>

    <script>
        // 核心轮播逻辑（功能完全保留，无修改）
        const sliderContainer = document.querySelector('.slider-container');
        const sliderImages = document.querySelector('.slider-images');
        const prevBtn = document.querySelector('.prev-btn');
        const nextBtn = document.querySelector('.next-btn');
        const indicatorsContainer = document.querySelector('.slider-indicators');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const imageDesc = document.getElementById('imageDesc');

        // 全局状态：默认暂停
        let isPlaying = false;
        let autoPlayInterval;
        let slideCount = 0;
        let slideWidth = 0;
        let currentIndex = 0;
        let imageData = [];

        // 加载JSON图片数据
        async function loadImageData() {
            try {
                const response = await fetch('image-mapping.json');
                imageData = await response.json();
                slideCount = imageData.length;
                // 动态生成图片列表
                sliderImages.innerHTML = '';
                imageData.forEach(item => {
                    const imgDiv = document.createElement('div');
                    imgDiv.className = 'slider-image';
                    imgDiv.innerHTML = `<img src="demo/${item.imageName}" alt="${item.description}">`;
                    sliderImages.appendChild(imgDiv);
                });
            } catch (error) {
                console.error("加载JSON失败：", error);
                alert("图片描述加载失败，请检查JSON文件路径！");
                slideCount = 0;
            }
        }

        // 初始化指示器
        function initIndicators() {
            indicatorsContainer.innerHTML = '';
            for (let i = 0; i < slideCount; i++) {
                const indicator = document.createElement('div');
                indicator.className = `indicator ${i === 0 ? 'active' : ''}`;
                indicator.setAttribute('data-index', i);
                indicator.addEventListener('click', () => {
                    currentIndex = i;
                    updateSlider();
                });
                indicatorsContainer.appendChild(indicator);
            }
        }

        // 更新轮播（图片+指示器+描述）
        function updateSlider() {
            if (slideCount === 0) return;
            sliderImages.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
            // 更新指示器
            document.querySelectorAll('.indicator').forEach((ind, idx) => {
                ind.classList.toggle('active', idx === currentIndex);
            });
            // 更新描述（支持大段文字/换行）
            imageDesc.textContent = imageData[currentIndex].description;
        }

        // 手动切换：上一张/下一张（不受播放状态影响）
        function goToNextSlide() {
            currentIndex = (currentIndex + 1) % slideCount;
            updateSlider();
        }
        function goToPrevSlide() {
            currentIndex = (currentIndex - 1 + slideCount) % slideCount;
            updateSlider();
        }

        // 播放/暂停核心逻辑
        function startAutoPlay(interval = 3000) {
            if (slideCount <= 1) return;
            autoPlayInterval = setInterval(goToNextSlide, interval);
            isPlaying = true;
            playPauseBtn.textContent = "暂停";
        }
        function stopAutoPlay() {
            clearInterval(autoPlayInterval);
            isPlaying = false;
            playPauseBtn.textContent = "播放";
        }
        function togglePlayPause() {
            if (slideCount <= 1) {
                alert("只有1张图片，无需自动播放！");
                return;
            }
            isPlaying ? stopAutoPlay() : startAutoPlay();
        }

        // 初始化轮播（默认暂停，无任何功能修改）
        async function initSlider() {
            await loadImageData();
            if (slideCount <= 1) {
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                playPauseBtn.disabled = true;
                playPauseBtn.textContent = "无播放";
                return;
            }

            // 计算图片容器实际宽度（纯图片区域，无控件）
            slideWidth = document.querySelector('.slider-images-wrapper').clientWidth;
            initIndicators();
            updateSlider(); // 初始化第一张图+描述

            // 绑定事件
            prevBtn.addEventListener('click', goToPrevSlide);
            nextBtn.addEventListener('click', goToNextSlide);
            playPauseBtn.addEventListener('click', togglePlayPause);

            // 鼠标悬停：播放中则暂停，离开则恢复
            sliderContainer.addEventListener('mouseenter', () => {
                if (isPlaying) stopAutoPlay();
            });
            sliderContainer.addEventListener('mouseleave', () => {
                if (isPlaying) startAutoPlay();
            });

            // 窗口自适应
            window.addEventListener('resize', () => {
                location.reload();
            });
        }

        // 启动轮播
        initSlider();
    </script>
</body>
</html>