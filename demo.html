<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>PNG图片轮播展示</title><style>@import url("demo.css");</style></head><body><h1>(我)一小時快速製作14大API</h1><div class="slider-container"><div class="slider-images-wrapper"><div class="slider-images"></div></div><button class="slider-nav-btn prev-btn">&lt;</button> <button class="slider-nav-btn next-btn">&gt;</button> <button class="play-pause-btn" id="playPauseBtn">播放</button><div class="slider-desc-container"><p id="imageDesc"></p></div><div class="slider-indicators"></div></div><script>// 核心轮播逻辑（功能完全保留，无修改）
        const sliderContainer = document.querySelector('.slider-container');
        const sliderImages = document.querySelector('.slider-images');
        const prevBtn = document.querySelector('.prev-btn');
        const nextBtn = document.querySelector('.next-btn');
        const indicatorsContainer = document.querySelector('.slider-indicators');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const imageDesc = document.getElementById('imageDesc');

        // 全局状态：默认暂停
        let isPlaying = false;
        let autoPlayInterval;
        let slideCount = 0;
        let slideWidth = 0;
        let currentIndex = 0;
        let imageData = [];

        // 加载JSON图片数据
        async function loadImageData() {
            try {
                const response = await fetch('demo-image-mapping.json');
                imageData = await response.json();
                slideCount = imageData.length;
                // 动态生成图片列表
                sliderImages.innerHTML = '';
                imageData.forEach(item => {
                    const imgDiv = document.createElement('div');
                    imgDiv.className = 'slider-image';
                    imgDiv.innerHTML = `<img src="demo/${item.imageName}" alt="${item.description}">`;
                    sliderImages.appendChild(imgDiv);
                });
            } catch (error) {
                console.error("加载JSON失败：", error);
                alert("图片描述加载失败，请检查JSON文件路径！");
                slideCount = 0;
            }
        }

        // 初始化指示器
        function initIndicators() {
            indicatorsContainer.innerHTML = '';
            for (let i = 0; i < slideCount; i++) {
                const indicator = document.createElement('div');
                indicator.className = `indicator ${i === 0 ? 'active' : ''}`;
                indicator.setAttribute('data-index', i);
                indicator.addEventListener('click', () => {
                    currentIndex = i;
                    updateSlider();
                });
                indicatorsContainer.appendChild(indicator);
            }
        }

        // 更新轮播（图片+指示器+描述）
        function updateSlider() {
            if (slideCount === 0) return;
            sliderImages.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
            // 更新指示器
            document.querySelectorAll('.indicator').forEach((ind, idx) => {
                ind.classList.toggle('active', idx === currentIndex);
            });
            // 更新描述（支持大段文字/换行）
            imageDesc.textContent = imageData[currentIndex].description;
        }

        // 手动切换：上一张/下一张（不受播放状态影响）
        function goToNextSlide() {
            currentIndex = (currentIndex + 1) % slideCount;
            updateSlider();
        }
        function goToPrevSlide() {
            currentIndex = (currentIndex - 1 + slideCount) % slideCount;
            updateSlider();
        }

        // 播放/暂停核心逻辑
        function startAutoPlay(interval = 3000) {
            if (slideCount <= 1) return;
            autoPlayInterval = setInterval(goToNextSlide, interval);
            isPlaying = true;
            playPauseBtn.textContent = "暂停";
        }
        function stopAutoPlay() {
            clearInterval(autoPlayInterval);
            isPlaying = false;
            playPauseBtn.textContent = "播放";
        }
        function togglePlayPause() {
            if (slideCount <= 1) {
                alert("只有1张图片，无需自动播放！");
                return;
            }
            isPlaying ? stopAutoPlay() : startAutoPlay();
        }

        // 初始化轮播（默认暂停，无任何功能修改）
        async function initSlider() {
            await loadImageData();
            if (slideCount <= 1) {
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                playPauseBtn.disabled = true;
                playPauseBtn.textContent = "无播放";
                return;
            }

            // 计算图片容器实际宽度（纯图片区域，无控件）
            slideWidth = document.querySelector('.slider-images-wrapper').clientWidth;
            initIndicators();
            updateSlider(); // 初始化第一张图+描述

            // 绑定事件
            prevBtn.addEventListener('click', goToPrevSlide);
            nextBtn.addEventListener('click', goToNextSlide);
            playPauseBtn.addEventListener('click', togglePlayPause);

            // 鼠标悬停：播放中则暂停，离开则恢复
            sliderContainer.addEventListener('mouseenter', () => {
                if (isPlaying) stopAutoPlay();
            });
            sliderContainer.addEventListener('mouseleave', () => {
                if (isPlaying) startAutoPlay();
            });

            // 窗口自适应
            window.addEventListener('resize', () => {
                location.reload();
            });
        }

        // 启动轮播
        initSlider();</script></body></html>